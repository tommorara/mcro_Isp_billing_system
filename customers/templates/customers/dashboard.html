<!DOCTYPE html>
<html>
<head>
    <title>Customer Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .card { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; }
        .btn { padding: 10px 20px; background-color: #007bff; color: white; border: none; cursor: pointer; }
        .btn:hover { background-color: #0056b3; }
        .btn-secondary { background-color: #6c757d; }
        .btn-secondary:hover { background-color: #5a6268; }
        .list-group-item { padding: 10px; }
    </style>
</head>
<body>
    <h1>Welcome, {{ customer.name }}!</h1>
    <p>Email: {{ customer.email }}</p>
    <p>Phone: {{ customer.phone }}</p>
    
    <h2>Active Subscriptions</h2>
    {% if subscriptions %}
        <div class="card">
            {% for subscription in subscriptions %}
                <p>
                    {{ subscription.package.name }} ({{ subscription.connection_type }})
                    - Ends: {{ subscription.end_date|date:"Y-m-d H:i" }}
                    {% if subscription.is_active %}
                        <span style="color: green;">Active</span>
                    {% else %}
                        <span style="color: red;">Expired</span>
                    {% endif %}
                    <br>
                    Username: {{ subscription.username }}
                    {% if subscription.package.data_limit_mb %}
                        <br>Data Limit: {{ subscription.package.data_limit_mb }} MB
                    {% endif %}
                </p>
            {% endfor %}
        </div>
    {% else %}
        <p>No active subscriptions.</p>
    {% endif %}
    
    <h2>Recent Invoices</h2>
    {% if invoices %}
        <div class="card">
            {% for invoice in invoices %}
                <p>
                    Invoice #{{ invoice.id }} - {{ invoice.amount }} {{ invoice.currency }}
                    - {{ invoice.status }} - {{ invoice.issued_date|date:"Y-m-d" }}
                </p>
            {% endfor %}
        </div>
    {% else %}
        <p>No invoices.</p>
    {% endif %}
    
    <h2>Open Support Tickets</h2>
    {% if tickets %}
        <div class="card">
            {% for ticket in tickets %}
                <p>
                    Ticket #{{ ticket.ticket_number }}: {{ ticket.subject }}
                    - Status: {{ ticket.get_status_display }}
                    - Created: {{ ticket.created_at|date:"Y-m-d H:i" }}
                </p>
            {% endfor %}
        </div>
    {% else %}
        <p>No open tickets.</p>
    {% endif %}
    
    <h2>Available Vouchers</h2>
    {% if vouchers %}
        <ul class="list-group">
            {% for voucher in vouchers %}
                <li class="list-group-item">{{ voucher.code }} - {{ voucher.package.name }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No vouchers available.</p>
    {% endif %}
    
    <h2>Notifications</h2>
    {% if notifications %}
        <ul class="list-group">
            {% for notification in notifications %}
                <li class="list-group-item">{{ notification.subject }} - {{ notification.created_at|date:"Y-m-d H:i" }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No notifications.</p>
    {% endif %}
    
    <a href="{% url 'customer_profile' %}" class="btn btn-primary mt-3">Profile</a>
    <a href="{% url 'customer_packages' %}" class="btn btn-primary mt-3">Packages</a>
    <a href="{% url 'customer_tickets' %}" class="btn btn-primary mt-3">Support</a>
    
    <a href="{% url 'customer_logout' %}" class="btn btn-secondary mt-3">Logout</a>
</body>
</html>